import java.io.*;
import javax.microedition.io.*;
import javax.bluetooth.*;

public class TestClient
{
	public final static String MACaddr = "000666495720";

	public static void main(String args[])
	{
		try
		{
			LocalDevice ld = LocalDevice.getLocalDevice();
			DiscoveryAgent da = ld.getDiscoveryAgent();
			UUID u = new UUID("0000110100001000800000805F9B34FB",false);
			
			RemoteDevice[] devs = da.retrieveDevices(DiscoveryAgent.PREKNOWN);
			RemoteDevice monitor = null;
			for (int i=0; i<devs.length; i++)
			{
				if(devs[i].getBluetoothAddress().equals(MACaddr))
				{
					monitor = devs[i];
				}
			}
			if (monitor == null)
			{
				System.err.println("Unable to discover power monitor.\n");
				System.exit(1);
			}
			
			String url = da.selectService(u,ServiceRecord.NOAUTHENTICATE_NOENCRYPT, false);
			
			StreamConnection conn = (StreamConnection) Connector.open(url);

			DataInputStream in = conn.openDataInputStream();


			for (int i=0; i<10; i++)
			{
				System.out.print(new Byte(in.readByte()).toString());
			}

			conn.close();
		} 
		catch (IOException e) 
		{
			System.err.print(e.toString());
		}
	}
}